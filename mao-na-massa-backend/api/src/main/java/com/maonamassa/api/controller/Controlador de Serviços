package com.maonamassa.api.controller;

import com.maonamassa.api.model.Servico;
import com.maonamassa.api.repository.ServicoRepository;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.http.ResponseEntity;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;

import java.util.List;

@RestController // Marca esta classe como um Controlador REST
@RequestMapping("/api/v1/servicos") // Define o "caminho" base da URL para este controlador
public class ServicoController {

    // Injeta (conecta) o nosso repositório de serviços neste controlador
    @Autowired
    private ServicoRepository servicoRepository;

    /**
     * Endpoint (API) para listar todos os serviços cadastrados no banco.
     * O Front-end chamará: GET /api/v1/servicos
     */
    @GetMapping
    public ResponseEntity<List<Servico>> listarServicos() {
        // Usa o repositório para buscar todos os serviços no banco de dados
        List<Servico> servicos = servicoRepository.findAll();
        
        // Retorna a lista de serviços como um JSON com status 200 (OK)
        return ResponseEntity.ok(servicos);
    }

    // (No futuro, podemos adicionar aqui métodos para Adicionar, Atualizar e Deletar serviços)
}